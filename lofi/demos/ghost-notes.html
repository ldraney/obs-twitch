<!DOCTYPE html>
<html>
<head>
  <title>Ghost Notes - Demo</title>
  <script src="https://unpkg.com/tone@14"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #eee;
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      user-select: none;
    }
    .container { max-width: 1000px; margin: 0 auto; }
    h1 { color: #e94560; margin-bottom: 10px; }
    h2 { color: #4ecdc4; margin-top: 30px; }
    .subtitle { color: #888; margin-bottom: 30px; }

    .section {
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
    }

    .controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 15px 0;
    }

    .control {
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 8px;
    }
    .control label {
      display: block;
      color: #888;
      font-size: 12px;
      margin-bottom: 5px;
    }
    .control .value {
      color: #e94560;
      font-weight: bold;
      float: right;
    }
    .control input[type="range"] {
      width: 100%;
      margin-top: 5px;
      accent-color: #e94560;
    }

    button {
      background: #e94560;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      margin: 5px;
      transition: transform 0.1s, background 0.2s;
    }
    button:hover { background: #ff6b6b; transform: scale(1.02); }
    button:active { transform: scale(0.98); }
    button:disabled { background: #444; cursor: not-allowed; transform: none; }
    button.secondary {
      background: #4ecdc4;
    }
    button.secondary:hover { background: #6ee7df; }
    button.active {
      background: #6ee7df;
      color: #1a1a2e;
    }

    #status {
      text-align: center;
      padding: 10px;
      color: #888;
      font-size: 14px;
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
      margin: 10px 0;
    }

    .loading {
      color: #ffd700;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .info-box {
      background: rgba(78, 205, 196, 0.1);
      border-left: 4px solid #4ecdc4;
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }
    .info-box.warning {
      background: rgba(233, 69, 96, 0.1);
      border-left-color: #e94560;
    }
    .info-box.tip {
      background: rgba(255, 215, 0, 0.1);
      border-left-color: #ffd700;
    }

    /* Drum grid styles */
    .drum-grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 20px 0;
    }

    .drum-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .drum-label {
      width: 80px;
      color: #888;
      font-size: 14px;
      text-align: right;
    }

    .steps {
      display: flex;
      gap: 4px;
      flex: 1;
    }

    .step {
      flex: 1;
      height: 60px;
      background: rgba(0,0,0,0.3);
      border-radius: 6px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      cursor: pointer;
      position: relative;
      transition: background 0.1s;
      min-width: 40px;
    }

    .step:hover {
      background: rgba(0,0,0,0.5);
    }

    .step.downbeat {
      border-top: 2px solid #e94560;
    }

    .step.playing {
      background: rgba(233, 69, 96, 0.3);
    }

    .velocity-bar {
      width: 70%;
      background: linear-gradient(to top, #e94560, #ff6b6b);
      border-radius: 3px 3px 0 0;
      transition: height 0.1s;
      min-height: 2px;
    }

    .velocity-bar.ghost {
      background: linear-gradient(to top, #4ecdc4, #6ee7df);
      opacity: 0.6;
    }

    .step-number {
      position: absolute;
      bottom: -18px;
      font-size: 10px;
      color: #555;
    }

    .beat-marker {
      display: flex;
      gap: 4px;
      margin-left: 90px;
      margin-bottom: 5px;
    }

    .beat-marker span {
      flex: 1;
      text-align: center;
      font-size: 12px;
      color: #666;
      min-width: 40px;
    }

    .beat-marker span.main {
      color: #e94560;
      font-weight: bold;
    }

    /* Preset buttons */
    .preset-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 15px 0;
    }

    .preset-btn {
      background: rgba(78, 205, 196, 0.2);
      border: 1px solid #4ecdc4;
      color: #4ecdc4;
      padding: 10px 20px;
      font-size: 14px;
    }
    .preset-btn:hover {
      background: rgba(78, 205, 196, 0.3);
    }
    .preset-btn.active {
      background: #4ecdc4;
      color: #1a1a2e;
    }

    /* Toggle switch */
    .toggle-container {
      display: flex;
      align-items: center;
      gap: 15px;
      justify-content: center;
      margin: 15px 0;
    }

    .toggle-label {
      color: #888;
      font-size: 14px;
    }

    .toggle {
      position: relative;
      width: 60px;
      height: 30px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .toggle.on {
      background: #4ecdc4;
    }

    .toggle-knob {
      position: absolute;
      top: 3px;
      left: 3px;
      width: 24px;
      height: 24px;
      background: white;
      border-radius: 50%;
      transition: left 0.2s;
    }

    .toggle.on .toggle-knob {
      left: 33px;
    }

    /* Transport controls */
    .transport {
      display: flex;
      gap: 10px;
      justify-content: center;
      align-items: center;
      margin: 20px 0;
    }

    .bpm-control {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(0,0,0,0.2);
      padding: 10px 15px;
      border-radius: 8px;
    }

    .bpm-control input {
      width: 80px;
      accent-color: #e94560;
    }

    .bpm-value {
      color: #e94560;
      font-weight: bold;
      min-width: 50px;
    }

    /* Legend */
    .legend {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin: 15px 0;
      font-size: 13px;
      color: #888;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-box {
      width: 16px;
      height: 16px;
      border-radius: 3px;
    }

    .legend-box.main {
      background: linear-gradient(to top, #e94560, #ff6b6b);
    }

    .legend-box.ghost {
      background: linear-gradient(to top, #4ecdc4, #6ee7df);
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Ghost Notes</h1>
    <p class="subtitle">Adding subtle velocity variations for groove and human feel</p>

    <div id="status" class="loading">Initializing drums...</div>

    <div class="section">
      <h2>1. Interactive Drum Grid</h2>
      <p>Click and drag on steps to adjust velocity. Ghost notes (teal) are quieter hits that add subtle texture between main beats.</p>

      <div class="legend">
        <div class="legend-item">
          <div class="legend-box main"></div>
          <span>Main hits (loud)</span>
        </div>
        <div class="legend-item">
          <div class="legend-box ghost"></div>
          <span>Ghost notes (quiet)</span>
        </div>
      </div>

      <div class="beat-marker">
        <span class="main">1</span><span>e</span><span>+</span><span>a</span>
        <span class="main">2</span><span>e</span><span>+</span><span>a</span>
        <span class="main">3</span><span>e</span><span>+</span><span>a</span>
        <span class="main">4</span><span>e</span><span>+</span><span>a</span>
      </div>

      <div class="drum-grid" id="drumGrid">
        <!-- Generated by JS -->
      </div>

      <div class="transport">
        <button id="playBtn" disabled>Play</button>
        <button id="stopBtn" class="secondary" disabled>Stop</button>
        <div class="bpm-control">
          <span style="color: #888;">BPM:</span>
          <input type="range" id="bpmSlider" min="60" max="120" value="85">
          <span class="bpm-value" id="bpmValue">85</span>
        </div>
      </div>

      <div class="info-box">
        <strong>Tip:</strong> Listen carefully to the "e" and "a" subdivisions. Ghost notes fill these spaces with subtle texture that makes the pattern feel more alive.
      </div>
    </div>

    <div class="section">
      <h2>2. Toggle Ghost Notes</h2>
      <p>Hear the dramatic difference ghost notes make by toggling them on and off.</p>

      <div class="toggle-container">
        <span class="toggle-label">Ghost Notes:</span>
        <div class="toggle on" id="ghostToggle">
          <div class="toggle-knob"></div>
        </div>
        <span id="ghostStatus" style="color: #4ecdc4;">ON</span>
      </div>

      <div class="info-box warning">
        <strong>Listen for:</strong> Without ghost notes, the pattern sounds mechanical and stiff. With them, it grooves and breathes like a real drummer.
      </div>
    </div>

    <div class="section">
      <h2>3. Velocity Humanization</h2>
      <p>Add random velocity variation to make patterns sound more natural and less robotic.</p>

      <div class="controls">
        <div class="control">
          <label>Random Variation <span class="value" id="variationVal">10%</span></label>
          <input type="range" id="variationSlider" min="0" max="30" value="10">
        </div>
      </div>

      <div class="info-box tip">
        <strong>Real drummers</strong> never hit with exactly the same force. 10-15% variation adds subtle humanization. Higher values create a looser, more relaxed feel.
      </div>
    </div>

    <div class="section">
      <h2>4. Presets</h2>
      <p>Load different ghost note configurations to hear various approaches.</p>

      <div class="preset-buttons">
        <button class="preset-btn" id="presetNoGhosts">No Ghosts</button>
        <button class="preset-btn active" id="presetSubtle">Subtle Ghosts</button>
        <button class="preset-btn" id="presetBusy">Busy Ghosts</button>
        <button class="preset-btn" id="presetHumanized">Full Humanization</button>
      </div>

      <div id="presetInfo" class="info-box" style="display: none;"></div>
    </div>
  </div>

  <script>
    // Drum pattern configuration
    const STEPS = 16; // 16th notes in one bar
    const INSTRUMENTS = ['hihat', 'snare', 'kick'];

    // Initial pattern with ghost notes
    const defaultPattern = {
      kick: [
        { step: 0, velocity: 0.95 },
        { step: 6, velocity: 0.7 },
        { step: 10, velocity: 0.85 },
      ],
      snare: [
        { step: 3, velocity: 0.15 },  // ghost
        { step: 4, velocity: 0.9 },   // main
        { step: 11, velocity: 0.12 }, // ghost
        { step: 12, velocity: 0.85 }, // main
      ],
      hihat: [
        { step: 0, velocity: 0.8 },
        { step: 1, velocity: 0.15 },  // ghost
        { step: 2, velocity: 0.7 },
        { step: 3, velocity: 0.18 },  // ghost
        { step: 4, velocity: 0.75 },
        { step: 5, velocity: 0.12 },  // ghost
        { step: 6, velocity: 0.7 },
        { step: 7, velocity: 0.2 },   // ghost
        { step: 8, velocity: 0.8 },
        { step: 9, velocity: 0.15 },  // ghost
        { step: 10, velocity: 0.7 },
        { step: 11, velocity: 0.18 }, // ghost
        { step: 12, velocity: 0.75 },
        { step: 13, velocity: 0.12 }, // ghost
        { step: 14, velocity: 0.7 },
        { step: 15, velocity: 0.2 },  // ghost
      ]
    };

    // Presets
    const presets = {
      noGhosts: {
        name: 'No Ghosts',
        description: 'Only main hits, no ghost notes. Notice how mechanical and stiff it sounds.',
        pattern: {
          kick: [
            { step: 0, velocity: 0.95 },
            { step: 6, velocity: 0.85 },
            { step: 10, velocity: 0.9 },
          ],
          snare: [
            { step: 4, velocity: 0.9 },
            { step: 12, velocity: 0.9 },
          ],
          hihat: [
            { step: 0, velocity: 0.8 },
            { step: 2, velocity: 0.8 },
            { step: 4, velocity: 0.8 },
            { step: 6, velocity: 0.8 },
            { step: 8, velocity: 0.8 },
            { step: 10, velocity: 0.8 },
            { step: 12, velocity: 0.8 },
            { step: 14, velocity: 0.8 },
          ]
        },
        variation: 0
      },
      subtle: {
        name: 'Subtle Ghosts',
        description: 'Light ghost notes on off-beats. The classic lofi approach - felt more than heard.',
        pattern: defaultPattern,
        variation: 10
      },
      busy: {
        name: 'Busy Ghosts',
        description: 'More prominent ghost notes filling almost every 16th. Creates a driving, busy feel.',
        pattern: {
          kick: [
            { step: 0, velocity: 0.95 },
            { step: 2, velocity: 0.25 },  // ghost
            { step: 6, velocity: 0.75 },
            { step: 10, velocity: 0.9 },
            { step: 14, velocity: 0.3 },  // ghost
          ],
          snare: [
            { step: 2, velocity: 0.2 },   // ghost
            { step: 3, velocity: 0.25 },  // ghost
            { step: 4, velocity: 0.9 },
            { step: 6, velocity: 0.15 },  // ghost
            { step: 10, velocity: 0.2 },  // ghost
            { step: 11, velocity: 0.25 }, // ghost
            { step: 12, velocity: 0.9 },
            { step: 14, velocity: 0.15 }, // ghost
          ],
          hihat: [
            { step: 0, velocity: 0.85 },
            { step: 1, velocity: 0.25 },
            { step: 2, velocity: 0.7 },
            { step: 3, velocity: 0.3 },
            { step: 4, velocity: 0.8 },
            { step: 5, velocity: 0.25 },
            { step: 6, velocity: 0.7 },
            { step: 7, velocity: 0.35 },
            { step: 8, velocity: 0.85 },
            { step: 9, velocity: 0.25 },
            { step: 10, velocity: 0.7 },
            { step: 11, velocity: 0.3 },
            { step: 12, velocity: 0.8 },
            { step: 13, velocity: 0.25 },
            { step: 14, velocity: 0.7 },
            { step: 15, velocity: 0.35 },
          ]
        },
        variation: 8
      },
      humanized: {
        name: 'Full Humanization',
        description: 'Ghost notes plus high random variation. Sounds like a relaxed, loose drummer.',
        pattern: defaultPattern,
        variation: 25
      }
    };

    // State
    let pattern = JSON.parse(JSON.stringify(defaultPattern));
    let isPlaying = false;
    let ghostsEnabled = true;
    let variation = 10;
    let currentStep = -1;
    let loop = null;
    let isDragging = false;
    let currentDragInstrument = null;

    // Synths for drums (using synthesis instead of samples for simplicity)
    let kick, snare, hihat;

    function updateStatus(msg, isLoading = false) {
      const status = document.getElementById('status');
      status.textContent = msg;
      status.className = isLoading ? 'loading' : '';
    }

    // Create drum sounds
    async function initDrums() {
      updateStatus('Creating drum sounds...', true);

      // Kick - low frequency with punch
      kick = new Tone.MembraneSynth({
        pitchDecay: 0.05,
        octaves: 6,
        oscillator: { type: 'sine' },
        envelope: {
          attack: 0.001,
          decay: 0.3,
          sustain: 0,
          release: 0.1
        }
      }).toDestination();
      kick.volume.value = -6;

      // Snare - noise burst with body
      snare = new Tone.NoiseSynth({
        noise: { type: 'white' },
        envelope: {
          attack: 0.001,
          decay: 0.15,
          sustain: 0,
          release: 0.05
        }
      }).toDestination();
      snare.volume.value = -10;

      // Hi-hat - high noise burst
      hihat = new Tone.MetalSynth({
        frequency: 200,
        envelope: {
          attack: 0.001,
          decay: 0.05,
          release: 0.01
        },
        harmonicity: 5.1,
        modulationIndex: 32,
        resonance: 4000,
        octaves: 1.5
      }).toDestination();
      hihat.volume.value = -18;

      updateStatus('Ready! Click Play to hear the pattern.');
      document.getElementById('playBtn').disabled = false;
      document.getElementById('stopBtn').disabled = false;
    }

    // Build the drum grid UI
    function buildGrid() {
      const grid = document.getElementById('drumGrid');
      grid.innerHTML = '';

      INSTRUMENTS.forEach(instrument => {
        const row = document.createElement('div');
        row.className = 'drum-row';

        const label = document.createElement('div');
        label.className = 'drum-label';
        label.textContent = instrument.charAt(0).toUpperCase() + instrument.slice(1);
        row.appendChild(label);

        const steps = document.createElement('div');
        steps.className = 'steps';

        for (let i = 0; i < STEPS; i++) {
          const step = document.createElement('div');
          step.className = 'step';
          if (i % 4 === 0) step.classList.add('downbeat');
          step.dataset.instrument = instrument;
          step.dataset.step = i;

          const bar = document.createElement('div');
          bar.className = 'velocity-bar';
          step.appendChild(bar);

          // Mouse events for velocity editing
          step.addEventListener('mousedown', (e) => {
            isDragging = true;
            currentDragInstrument = instrument;
            handleVelocityEdit(e, step, instrument, i);
          });

          step.addEventListener('mousemove', (e) => {
            if (isDragging && currentDragInstrument === instrument) {
              handleVelocityEdit(e, step, instrument, i);
            }
          });

          steps.appendChild(step);
        }

        row.appendChild(steps);
        grid.appendChild(row);
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
        currentDragInstrument = null;
      });

      updateGridVisuals();
    }

    // Handle velocity editing via mouse
    function handleVelocityEdit(e, stepEl, instrument, stepIndex) {
      const rect = stepEl.getBoundingClientRect();
      const y = e.clientY - rect.top;
      const height = rect.height;
      let velocity = 1 - (y / height);
      velocity = Math.max(0, Math.min(1, velocity));

      // Find or create the note
      const notes = pattern[instrument];
      let note = notes.find(n => n.step === stepIndex);

      if (velocity < 0.05) {
        // Remove the note if velocity is very low
        pattern[instrument] = notes.filter(n => n.step !== stepIndex);
      } else {
        if (note) {
          note.velocity = velocity;
        } else {
          pattern[instrument].push({ step: stepIndex, velocity });
          pattern[instrument].sort((a, b) => a.step - b.step);
        }
      }

      updateGridVisuals();
    }

    // Update grid visuals based on pattern
    function updateGridVisuals() {
      INSTRUMENTS.forEach(instrument => {
        const notes = pattern[instrument];
        const steps = document.querySelectorAll(`.step[data-instrument="${instrument}"]`);

        steps.forEach((step, i) => {
          const bar = step.querySelector('.velocity-bar');
          const note = notes.find(n => n.step === i);

          if (note) {
            let velocity = note.velocity;

            // Apply ghost toggle
            if (!ghostsEnabled && velocity < 0.4) {
              bar.style.height = '0%';
              bar.classList.remove('ghost');
              return;
            }

            bar.style.height = (velocity * 100) + '%';

            // Ghost notes are teal, main hits are red
            if (velocity < 0.4) {
              bar.classList.add('ghost');
            } else {
              bar.classList.remove('ghost');
            }
          } else {
            bar.style.height = '0%';
            bar.classList.remove('ghost');
          }
        });
      });
    }

    // Highlight current step during playback
    function highlightStep(step) {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('playing'));
      document.querySelectorAll(`.step[data-step="${step}"]`).forEach(s => s.classList.add('playing'));
    }

    // Humanize velocity with random variation
    function humanize(velocity) {
      if (variation === 0) return velocity;
      const amount = variation / 100;
      const offset = (Math.random() - 0.5) * 2 * amount;
      return Math.max(0.05, Math.min(1, velocity + offset));
    }

    // Trigger a drum hit
    function triggerDrum(instrument, velocity) {
      const v = humanize(velocity);

      // If ghosts disabled, skip quiet notes
      if (!ghostsEnabled && velocity < 0.4) return;

      switch (instrument) {
        case 'kick':
          kick.triggerAttackRelease('C1', '8n', undefined, v);
          break;
        case 'snare':
          snare.triggerAttackRelease('8n', undefined, v);
          break;
        case 'hihat':
          hihat.triggerAttackRelease('32n', undefined, v);
          break;
      }
    }

    // Start playback
    async function startPlayback() {
      await Tone.start();

      Tone.Transport.bpm.value = parseInt(document.getElementById('bpmSlider').value);

      let stepIndex = 0;

      loop = new Tone.Loop((time) => {
        // Highlight UI (schedule slightly ahead for visual sync)
        Tone.Draw.schedule(() => {
          highlightStep(stepIndex);
        }, time);

        // Trigger drums for this step
        INSTRUMENTS.forEach(instrument => {
          const notes = pattern[instrument];
          const note = notes.find(n => n.step === stepIndex);
          if (note) {
            // Use Tone.js time scheduling for precise timing
            const v = humanize(note.velocity);
            if (ghostsEnabled || note.velocity >= 0.4) {
              switch (instrument) {
                case 'kick':
                  kick.triggerAttackRelease('C1', '8n', time, v);
                  break;
                case 'snare':
                  snare.triggerAttackRelease('8n', time, v);
                  break;
                case 'hihat':
                  hihat.triggerAttackRelease('32n', time, v);
                  break;
              }
            }
          }
        });

        stepIndex = (stepIndex + 1) % STEPS;
      }, '16n').start(0);

      Tone.Transport.start();
      isPlaying = true;

      document.getElementById('playBtn').textContent = 'Playing...';
      document.getElementById('playBtn').disabled = true;
    }

    // Stop playback
    function stopPlayback() {
      Tone.Transport.stop();
      if (loop) {
        loop.dispose();
        loop = null;
      }
      isPlaying = false;
      currentStep = -1;

      document.querySelectorAll('.step').forEach(s => s.classList.remove('playing'));
      document.getElementById('playBtn').textContent = 'Play';
      document.getElementById('playBtn').disabled = false;
    }

    // Apply a preset
    function applyPreset(presetKey) {
      const preset = presets[presetKey];
      pattern = JSON.parse(JSON.stringify(preset.pattern));
      variation = preset.variation;

      document.getElementById('variationSlider').value = variation;
      document.getElementById('variationVal').textContent = variation + '%';

      // Update preset button states
      document.querySelectorAll('.preset-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById('preset' + presetKey.charAt(0).toUpperCase() + presetKey.slice(1).replace('Ghosts', 'Ghosts')).classList.add('active');

      // Show preset info
      const info = document.getElementById('presetInfo');
      info.innerHTML = `<strong>${preset.name}:</strong> ${preset.description}`;
      info.style.display = 'block';

      updateGridVisuals();
    }

    // Setup event listeners
    function setupEventListeners() {
      // Transport
      document.getElementById('playBtn').addEventListener('click', startPlayback);
      document.getElementById('stopBtn').addEventListener('click', stopPlayback);

      // BPM
      document.getElementById('bpmSlider').addEventListener('input', (e) => {
        const bpm = parseInt(e.target.value);
        document.getElementById('bpmValue').textContent = bpm;
        Tone.Transport.bpm.value = bpm;
      });

      // Ghost toggle
      document.getElementById('ghostToggle').addEventListener('click', () => {
        ghostsEnabled = !ghostsEnabled;
        const toggle = document.getElementById('ghostToggle');
        const status = document.getElementById('ghostStatus');

        toggle.classList.toggle('on', ghostsEnabled);
        status.textContent = ghostsEnabled ? 'ON' : 'OFF';
        status.style.color = ghostsEnabled ? '#4ecdc4' : '#888';

        updateGridVisuals();
      });

      // Variation slider
      document.getElementById('variationSlider').addEventListener('input', (e) => {
        variation = parseInt(e.target.value);
        document.getElementById('variationVal').textContent = variation + '%';
      });

      // Presets
      document.getElementById('presetNoGhosts').addEventListener('click', () => applyPreset('noGhosts'));
      document.getElementById('presetSubtle').addEventListener('click', () => applyPreset('subtle'));
      document.getElementById('presetBusy').addEventListener('click', () => applyPreset('busy'));
      document.getElementById('presetHumanized').addEventListener('click', () => applyPreset('humanized'));
    }

    // Initialize
    async function init() {
      buildGrid();
      setupEventListeners();
      await initDrums();
    }

    init();
  </script>
</body>
</html>
